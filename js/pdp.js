!function(){function t(){var t=document.createElement("script");t.setAttribute("src","//widget.fitanalytics.com/widget_zepto.js"),t.setAttribute("type","text/javascript"),document.body.appendChild(t),e.initialize(),window._fitAnalytics=window._upcload=function(){},window._fitAnalytics.shop=e}if(!window._fitAnalytics){var e={prefix:"maje-",products:{},isMobile:/iphone|android|iemobile|blackberry/i.test(window.navigator.userAgent)&&"ontouchstart"in window,el:{productContainer:"#pdpMain .wrapper-product-image-container",qvContainer:"div.ui-dialog.quickview",sizes:".swatches.size",defaultSizes:".attribute.size .defaultSize",frSizes:".attribute.size .sizeFr",currentSize:".attribute.size .selected",addToCart:"#add-to-cart",thumbnail:".swiper-slide-active picture source:nth-child(1)",buttonAnchor:".size-content",sizeChart:".sizeguide"},hideSizeChart:!0,blockedLocales:[],getABTestFunnel:function(){return e.widget.getUserABTestFunnel()},isABTestActive:function(){return!!e.widget.isABTestEnabled()},initialize:function(){var t=setInterval(function(){e.isLoaded()&&(clearInterval(t),e.onLoaded())},100)},isLoaded:function(){return"function"==typeof window.FitAnalyticsWidget&&window.fitScript},isBlockedLocale:function(){var t=[e.getLanguage(),e.getCountry()].join("_");return e.blockedLocales.indexOf(t)>-1},isQuickView:function(){return!!e.$(e.el.qvContainer).length},isStaging:function(){return/^\w\w-(staging|dev)\./.test(window.location.hostname)},onLoaded:function(){e.$=FitAnalyticsWidget.jQuery,e._=FitAnalyticsWidget._,e.updatePageData();var t=e.isBlockedLocale()&&!e.isStaging();e.isDataAvailable()&&!t&&e.onPageLoaded()},isDataAvailable:function(){var t=e.getCurrentSerial(),i=e.getSerials();return!(!t||!i.length)},updatePageData:function(){var t=e.$("#fitScript").text()||"",i=t.match(new RegExp("fitAnalyticsData\\s*=\\s*(.+)window.fitAnalyticsUserID\\s*=\\s*(.+)","s"))||[],n=i[1],r=i[2];try{window.fitAnalyticsData=JSON.parse(n),window.fitAnalyticsUserID=JSON.parse(r)}catch(t){window.fitAnalyticsData={},window.fitAnalyticsUserID={}}},getProductData:function(){return window.fitAnalyticsData||{}},isProductChange:function(){var t=e.$("#fitScript").text()||"",i=t.match(new RegExp("fitAnalyticsData\\s*=\\s*(.+)window.fitAnalyticsUserID\\s*=\\s*(.+)","s"))||[],n=i[1];try{n=JSON.parse(n)}catch(t){n={}}return n.currentProductId!==e.getProductData().currentProductId},find:function(t){return e.getContainer().find(t)},getContainer:function(){return e.$(e.el.productContainer)},getCurrentRawSerial:function(){return(e.getProductData().currentProductId||"").replace(/_/,"-")},getCurrentSerial:function(){var t=e.getCurrentRawSerial();return t&&e.prefix+t},getRawSerials:function(){return(e.getProductData().allProductIds||"").split(",").map(function(t){return t.replace(/_/,"-")})},getSerials:function(){return e.getRawSerials().map(function(t){return e.prefix+t})},hasFrenchSizes:function(){return e.find(e.el.sizes).hasClass("frSizeShow")},getCurrentSize:function(){return n(e.find(e.el.currentSize+(e.hasFrenchSizes()?" .sizeFr":" .defaultSize")).text())},getSizes:function(){var t=[];t.dic={},t.state={};var i=r(e.getProductData(),"size.values",[]),n=r(e.getProductData(),"size.availability",{});if(e.hasFrenchSizes()){var o=0,a={};t.push.apply(t,(i.FR||"").split(","));for(var s in n){a[t[o]]=n[s],o++}n=a}else{var c=e.getCountry();c="GB"===c?"UK":c,t=(i[c]||"").split(",")}return t=t.filter(function(t){return n[t]}),t.state=n,t},getShopSizingSystem:function(){var t={BE:"",DE:"",ES:"",IT:"",FR:"",MAJE_RE:"GB",IE:"GB",CH:"GB",GB:"GB",US:"US"},i=e.getCountry(),n=t[i];return n&&e.hasFrenchSizes()&&(n="FR"),n},getLanguage:function(){return(e.getProductData().shopLanguage||"").toLowerCase()},getCountry:function(){var t=(e.getProductData().shopCountry||"").toUpperCase();return"RE"===t?"MAJE_RE":t},getThumbnail:function(){return e.find(e.el.thumbnail).first().data("srcset")||e.getProductData().mainThumbnail||""},getUserId:function(){return r(window,"fitAnalyticsUserID.userId","")},getSizeChart:function(){return e.find(e.el.sizeChart)},getContext:function(t){return e.products[t]},setContext:function(t,i){return e.products[t]=e._.extend({},e.products[t],i)},attachMetricsToSizeChart:function(){e.getSizeChart().off("click.fita").on("click.fita",function(){e.widget.meterClick("sizeChart",{garmentId:e.getCurrentSerial()})})},onPageLoaded:function(){e.loadWidget(),e.requestProducts()},loadWidget:function(){e.widget=new window.FitAnalyticsWidget({language:e.getLanguage(),shopCountry:e.getCountry(),userId:e.getUserId(),shopSizingSystem:e.getShopSizingSystem(),recommend:function(t,i,n){e.recommend(t,i,n)},cart:function(t,n,r){if(e.recommend(t,n,r),e.selectSize(n),!e.isMobile)var o=50,a=setInterval(function(){n===e.getCurrentSize()?(clearInterval(a),i(e.find(e.el.addToCart))):0==--o&&clearInterval(a)},100)},close:function(t,i,n){e.enablePageScrolling(),e.recommend(t,i,n),e.button.find().focus()},open:function(){e.blockPageScrolling(),Object.keys(e.products).forEach(function(t){(e.products[t]||{}).recommendation=null})}})},blockPageScrolling:function(){e.$("html").addClass("uclw_widget_open")},enablePageScrolling:function(){e.$("html").removeClass("uclw_widget_open")},selectSize:function(t){sizesSelector=e.hasFrenchSizes()?e.el.frSizes:e.el.defaultSizes,sizeElement=e.find(sizesSelector).toArray().filter(function(e){return n(e.innerText)===t}),i(sizeElement)},requestProducts:function(){e.collectProducts();var t=Object.keys(e.products);e.widget.requestProducts(t,function(t){t.forEach(function(t){e.setContext(t.garment.serial,{isSupported:!0})}),e.checkForProductChange()})},collectProducts:function(){e.getSerials().forEach(function(t){e.setContext(t,{isSupported:!1})})},recommend:function(t,i,n){e.addRecommendationToContext(t,i,n),e.button.setText(i,n)},addRecommendationToContext:function(t,i,n){e.setContext(t,{recommendation:{size:i,details:n,sizingSystem:e.getShopSizingSystem()}})},checkForProductChange:function(){!function(){var t=e.getCurrentSerial(),i=e.getShopSizingSystem(),n=!0;setInterval(function(){var r=e.getContext(t),o=e.button.find().length,a=e.getShopSizingSystem();e.isProductChange()||n?(n=!1,e.updatePageData(),(t=e.getCurrentSerial())&&e.onProductChange()):r&&r.isSupported&&!o&&e.installButton(),i!==a&&(i=a)&&e.getRecommendation()},200)}()},onProductChange:function(){e.attachMetricsToSizeChart(),e.reconfigure()},reconfigure:function(){var t=e.getCurrentSerial();e.getContext(t)||e.setContext(t,{isSupported:!1}),e.widget.reconfigure({productId:t},e.onProductLoaded,e.onProductError)},onProductLoaded:function(t){var i=t.productSerial;e.setContext(i,{isSupported:!0}),e.widget.meterProductVisit(i,!0),e.installButton()},onProductError:function(){e.widget.meterProductVisit(e.getCurrentSerial(),!1),e.button.hide(),e.attachMetricsToSizeChart(),e.getSizeChart().show()},installButton:function(){if(e.isABTestActive())return void e.ABTest.install();e.button.install(),e.button.show(),e.setRecommendation(),e.hideSizeChart&&e.getSizeChart().hide()},setRecommendation:function(){var t=e.getContext(e.getCurrentSerial());t.recommendation?e.button.setText(t.recommendation.size,t.recommendation.details):(t.recommendation=!0,e.getRecommendation())},getRecommendation:function(){e.widget.getRecommendation({productId:e.getCurrentSerial(),thumb:e.getThumbnail(),manufacturedSizes:e.getSizes().state,shopSizingSystem:e.getShopSizingSystem()})},button:{elementId:"fitanalytics__button",text:{bg:["Намери своя размер","Вашият размер е (size)"],ca:["Rebi una recomanació de talla","La seva talla és (size)"],cs:["Zjistěte svou velikost","Vaše velikost je (size)"],da:["Find din størrelse","Din størrelse er (size)"],de:["Welche Größe haben Sie?","Ihre Größe ist (size)"],el:["Βρες το μέγεθός σου","Το μέγεθός σου είναι (size)"],en:["What size are you?","Your size is (size)"],es:["¿Cuál es tu talla?","Tu talla es (size)"],fi:["Löydä oma kokosi","Sinun kokosi on (size)"],fr:["Quelle est votre taille?","Votre taille est (size)"],hr:["Pronađite svoju veličinu","Vaša veličina je (size)"],hu:["Találd meg a méreted","A méreted (size)"],it:["Qual è la tua taglia?","Sei una taglia (size)"],ja:["サイズを見つけましょう","あなたのサイズ： (size)"],ko:["사이즈 찾기","고객님의 사이즈는 (size) 입니다"],mk:["Пронајдете ја својата големина","Вашата големина е (size)"],nl:["Vind jouw maat","Jouw maat is (size)"],no:["Finn størrelsen din","Størrelsen din er (size)"],pl:["Znajdź mój rozmiar","Twój rozmiar to (size)"],pt:["Encontrar seu tamanho","Seu tamanho é (size)"],ro:["Găsește-mi mărimea","Mărimea dvs. este (size)"],ru:["Найдите свой размер","Ваш размер (size)"],sk:["Zistite svoju veľkosť","Vaša veľkosť je: (size)"],sl:["Poiščite svojo velikost","Vaša velikost je (size)"],sv:["Hitta din storlek","Din storlek är (size)"],tr:["Size uyan bedeni bulun","Sizin bedeniniz (size)"],zh:["找到您的尺寸","您的尺寸是 (size)"]},getText:function(t,i){var n=!("string"!=typeof t||!e.getSizes().state[t]||i.outOfStock||i.outOfRange),r=this.text[e.getLanguage()]||this.text.en;return n?r[1].replace("(size)","<b>"+t+"</b>"):r[0]},setText:function(t,e){this.find().find(".fitanalytics__button-text").html(this.getText(t,e)),this.find().attr("aria-label",this.getText(t,e).replace(/<\/?b>/g,""))},buildButton:function(){var t=this.getText();return e.$("<a></a>").attr({id:this.elementId,tabindex:"0",role:"button","aria-label":this.getText()||this.text.en}).css({"margin-top":e.isMobile?"":"-5px",cursor:"auto",display:"block",width:"auto","margin-top":"25px","text-decoration":"underline","text-align":"center"}).on("keypress",this.onKeyboardPress).on("click",this.onClick).mouseenter(function(){return this.querySelector("img").style.opacity="0.8",this.style.textDecoration="none",!1}).mouseleave(function(){return this.querySelector("img").style.opacity="1",this.style.textDecoration="underline",!1}).append(e.$("<img>").attr({alt:this.getText(),src:"//integrations.fitanalytics.com/shop/maje/maje-hanger.svg"}).css({width:"auto",height:"22px",cursor:"pointer",display:"inline-block","margin-right":"10px","margin-top":"2px"})).append(e.$("<span></span>").attr({class:"fitanalytics__button-text"}).css({"text-decoration":"inherit",display:"inline-block",cursor:"pointer","vertical-align":"top","line-height":"23px",color:"#000","font-size":"10px","letter-spacing":".05em","font-family":"agBook,Arial,sans-serif"}).text(t)).append('<style type="text/css">\n            #fitanalytics__button:focus {\n              outline: 0px black dotted !important;\n              outline-offset: 2px;\n            }\n\n            #uclw_block_height, #uclw_block_weight, .uclw_onoff_switch {\n              z-index: 40000 !important;\n            } \n            .uclw_system_switch {\n              z-index: 40001 !important;\n            }\n            #uclw_animate_age #uclw_form {\n              z-index: 4000 !important;\n            }\n\n            html.uclw_widget_open {\n              overflow: hidden !important;\n              padding-right: 15px;          \n            }\n          </style>')},isInitialized:!1,show:function(){this.find().show()},hide:function(){this.find().hide()},find:function(){return e.find("#"+this.elementId)},onClick:function(){return e.widget.meterClick("sizeAdvisor",{garmentId:e.getCurrentSerial()}),e.widget.open({productId:e.getCurrentSerial(),thumb:e.getThumbnail(),manufacturedSizes:e.getSizes().state,shopSizingSystem:e.getShopSizingSystem()}),!1},onKeyboardPress:function(t){t.preventDefault();var i=t.which;13!==i&&32!==i||e.button.onClick()},install:function(){if(!this.find().length){var t=this.buildButton();e.find(e.el.buttonAnchor).prepend(t)}}},ABTest:{$sizeAdvisor:null,$sizeChart:null,sizeChartText:"",className:"fitanalytics__button__ABTest",buildButton:function(){return e._.extend({},e.button,{getText:function(t,i){var n=!("string"!=typeof t||!e.getSizes().state[t]||i.outOfStock||i.outOfRange),r=e.button.text[e.getLanguage()];return r&&n?r[1].replace("(size)","<b>"+t+"</b>"):e.ABTest.sizeChartText},setText:function(t,e){this.find().html(this.getText(t,e)),this.find().attr("aria-label",this.getText(t,e).replace(/<\/?b>/g,""))},find:function(){return e.find("."+e.ABTest.className)},hide:function(){return this.find().hide()}})},install:function(){var t=e.getSizeChart(),i=e.getABTestFunnel();if(e.button=this.buildButton(),!e.button.find().length){this.sizeChartText=n(t.text()),this.$sizeAdvisor=t.clone(!0,!0).addClass(this.className).off("click").on("click.fitA",e.button.onClick),t.off("click.fita").on("click.fita",function(){e.widget.meterClick("sizeChart"),e.widget.meterABTestSizeChartOpen()});for(var r=0;r<t.length;r++)t[r].after(this.$sizeAdvisor[r])}this.$sizeChart=t,this.setup(i)},setup:function(t){this.$sizeChart["control"===t?"show":"hide"](),this.$sizeAdvisor["fita"===t?"show":"hide"](),"fita"===t&&e.setRecommendation()}}},i=function(t){return!(!t||!e.$)&&(t instanceof e.$||e.$.zepto&&e.$.zepto.isZ(t)||(t=e.$(t)),"function"==typeof t.prop&&"OPTION"===t.prop("tagName")?t.parent().val(t.val()).change():e.isMobile&&"function"==typeof t.tap?t.click():"function"==typeof t.click&&t.click(),t)},n=function(t){return"string"!=typeof t?"":t.replace(/^["'\s\uFEFF\xA0]+|[\s\uFEFF\xA0"']+$/g,"")},r=function(t,e,i){t=t&&t instanceof Object?t:{},null==i&&(i=null),"."===e&&(e="");for(var n="[object Array]"===Object.prototype.toString.apply(e)?e:e.split("."),r=0,o=n.length;r<o;r++){var a=t[n[r]];if(null==a)return i;t=a}return a};"interactive"===document.readyState||"complete"===document.readyState?t():document.addEventListener("DOMContentLoaded",function(){t()})}}();
//# sourceMappingURL=pdp.js.map